<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400|Oswald" rel="stylesheet">
    <script src="https://use.typekit.net/ptv3liz.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta property="og:image" content="window.url"/>
    <meta property="og:description"    content="Politics Illustrated." />
    <meta property="og:image:width"    content="600px" />
    <meta property="og:image:height"    content="1000px" />
    <title>Make America Doodle Again</title>
    <script src="js/canvas-to-blob.min.js"></script>
    <script src="https://fb.me/react-0.14.7.min.js"></script>
    <script src="https://fb.me/react-dom-0.14.7.min.js"></script>
    <!--<script src="https://unpkg.com/react@15.3.2/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script>
    <!--<script src="js/dropzone.js"></script>-->
    <!--<script src = "https://cdnjs.cloudflare.com/ajax/libs/babel-core/6.1.19/browser.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script src="js/sketch.js"></script>
    
    <style>@import url(http://fonts.googleapis.com/css?family=Shadows+Into+Light);
    


    body,html{
        font-family:Bebas Neue;
        letter-spacing:2px;
        background:url('img/Backgroundx2.png');
        width:100%;
        height:100%;
        position:absolute;
        margin:0px;
        overflow-x:hidden;
        overflow-y:visible;
    }
    
    
    
    #candidate, #candidate2{
        position: relative;
        width: 160px;
        margin:auto;
        height:160px;
        font-size:40px;
        text-align:center;
        margin-top:60px;
        border:3px solid #492E8D;
        border-radius:200px;
    }

    #candidate[candidate="Hillary"],#candidate2[candidate="Hillary"]{
        background:url('img/Clinton.png') no-repeat center center;
        background-size:contain;
    }

    #candidate[candidate="Donald"],#candidate2[candidate="Donald"]{
        background:url('img/Trump.png') no-repeat center center;
        background-size:contain;
    }

    #candidate[candidate="Jill"],#candidate2[candidate="Jill"]{
        background:url('img/Stein.png') no-repeat center center;
        background-size:contain;
    }

    #candidate[candidate="Gary"],#candidate2[candidate="Gary"]{
        background:url('img/Johnson.png') no-repeat center center;
        background-size:contain;
    }

    @-moz-keyframes spin {
        from { -moz-transform: rotate(0deg); }
        to { -moz-transform: rotate(360deg); }
    }
    @-webkit-keyframes spin {
        from { -webkit-transform: rotate(0deg); }
        to { -webkit-transform: rotate(360deg); }
    }
    @keyframes spin {
        from {transform:rotate(0deg);}
        to {transform:rotate(360deg);}
    }

    #candidate2{
        -webkit-animation-name: spin;
    -webkit-animation-duration: 1000ms;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
    -moz-animation-name: spin;
    -moz-animation-duration: 1000ms;
    -moz-animation-iteration-count: infinite;
    -moz-animation-timing-function: linear;
    -ms-animation-name: spin;
    -ms-animation-duration: 1000ms;
    -ms-animation-iteration-count: infinite;
    -ms-animation-timing-function: linear;
    -o-transition: rotate(3600deg);
    animation-name: spin;
    animation-duration: 1000ms;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
    transition: rotate(3600deg);
    }
    
    
    #issue{
        position: relative;
        width: 100%;
        max-width:400px;
        margin:auto;
        height:30px;
        font-size:30px;
        text-align:center;
        color:#FE4841;
        margin-top:10px;
        margin-bottom:0px;
    }

    #candidateName{
        position: relative;
        width: 100%;
        max-width:400px;
        margin:auto;
        height:30px;
        font-size:30px;
        text-align:center;
        color:#FE4841;
        margin-top:10px;
        margin-bottom:0px;
    }
    
    #draw{
        position: relative;
        width: 100%;
        max-width:400px;
        margin:auto;
        height:50px;
        font-size:50px;
        text-align:center;
        margin-top:10px;
        margin-bottom:0px;
        color:#492E8D;
    }
    
    #stance{
        position: relative;
        width: 100%;
        max-width:400px;
        margin:auto;
        height:50px;
        font-size:50px;
        text-align:center;
        margin-top:10px;
        margin-bottom:0px;
        color:#492E8D;
    }
    
    #stop{
        margin: auto;
        display: block;
        width: 150px;
        text-align: center;
        height: 60px;
        border-radius: 100px;
        background: black;
        line-height: 60px;
        color: white;
        background:#492E8D;
        margin-top:60px;
        font-size:30px;
    }
    
    #search{
        display: block;
        padding: 20px;
        width: 140px;
        text-align: center;
        margin: auto;
        margin-top:30px;
        color:#492E8D!important;
        position:relative;
        text-decoration:none!important;
    }

    #search>div{
        background: #FE4841;
        width: 40px;
        height: 40px;
        border-radius: 40px;
        position: absolute;
        top: 8px;
        right: 8px;
        display:none;
    }

    #search>p{
        margin:0px;
        position:relative;
        margin:0px;
        z-index:100;
    }

    #search2{
        display: block;
        padding: 20px;
        width: 140px;
        text-align: center;
        margin: auto;
        margin-top:30px;
        color:#492E8D!important;
        position:relative;
        text-decoration:none!important;
    }


   #browserDraw{
        display: block;
        padding: 20px;
        width: 180px;
        text-align: center;
        margin: auto;
        color:#FE4841!important;
    }

    
    #doodle{
        margin: auto;
        display: block;
        width: 220px;
        text-align: center;
        height: 60px;
        border-radius: 100px;
        background: black;
        line-height: 60px;
        color: white;
        background:#492E8D;
        margin-top:0px;
        font-size:30px;
    }

    #doodleThis{
        position: relative;
        width: 100%;
        max-width: 400px;
        margin: auto;
        height: 10px;
        font-size: 40px;
        text-align: center;
        margin-top: 50px;
        padding: 20px 0px;
        margin-bottom: 60px;
        color: #492E8D;
    }
    
    #fullStance{
        text-align: center;
        margin: auto;
        max-width: 300px;
        width: 100%;
        font-size: 25px;
        padding: 20px;
        color: #FE4841;
        position: relative;
        top: 20px;
    }

    
    #back{
        padding:20px;
    }
    
    #timer{
        text-align:center;
        font-size: 80px;
        margin-bottom:70px;
        color:white;
    }
    
    #done{
        margin:auto;
        text-align: center;
        bottom:40px;
        position: relative;
        padding: 20px;
        width: 60px;
        border-radius: 60px;
        color: white;
        background:#492E8D;
    }

     #doneDrawing{
        margin-left:-185px;
        left:50%;
        text-align: center;
        bottom:40px;
        position: absolute;
        padding: 20px;
        background: black;
        width: 60px;
        border-radius: 60px;
        color: white;
        background:#492E8D;
        font-size: 30px;
    }

    #clearDoodle{
        margin-left: -50px;
        left: 50%;
        text-align: center;
        bottom: 40px;
        position: absolute;
        padding: 20px;
        background: black;
        width: 200px;
        border-radius: 60px;
        color: white;
        background: #FE4841;
        font-size: 30px;
    }

    
    #replay{
        padding:20px;
        margin:20px auto;
        background:#472094;
        color:white;
        border-radius:50px;
        width: 200px;
        text-align:center;
        z-index:100;
        position:relative;
        box-sizing: border-box;
        font-size: 30px;
    }
    
    #shareit{
        padding:20px;
        margin:20px auto;
        background:#472094;
        color:white;
        border-radius:50px;
        width: 200px;
        text-align:center;
        z-index:100;
        position:relative;
        box-sizing: border-box;
        font-size: 30px;
    }

    #mainNav{
        left:0px;
        height:50px;
        position:absolute;
        z-index:100000;
        background:url('img/HamburgerMenux2.png') right center no-repeat;
        background-size:20px;
        right:10px;
    }

    #logo{
        position:absolute;
        left:10px;
        height:100%;
        background:white;
        width:30px;
        background:url('img/LogoSmallx2.png') no-repeat center center;
        background-size:contain;
    }

    #menu{
        position:absolute;
        right:0px;
        padding-right:40px;
        height:100%;
        opacity:0px;
        overflow:hidden;
        box-sizing:border-box;
        width:40px;
    }

    #menu.active{
        width:200px;
        padding-right:25px;
    }

    #menu>a>div{
        float:right;
        margin:0px 10px;
        line-height:50px;
        color:#472094!important;
        font-size:20px;
    }

    #purpleBG{
        width:300%;
        height:200%;
        top:320px;
        margin-left:-100%;
        transform:rotate(15deg);
        background:#472094;
        position:absolute;
        z-index:0;
    }

    #chooseScreen, #drawScreen, #shareScreen{
        position:absolute;
        z-index:1;
        height:100%;
        top:0px;
        width:100%;
    }

    #landingPage{
        height:100%;
        width:100%;
        position:absolute;
        overflow:hidden;
    }

    #OrDrawInBrowser{
        position: fixed;
        bottom: 0px;
        right: 0px;
        z-index: 100;
        background: #805CDB;
        height: 60px;
        box-sizing: border-box;
        padding: 10px;
        width: 100px;
        line-height: 22px;
        color: #472094;
        text-align:center;
        cursor:pointer;
    }

    #drawinBrowser{
        position:absolute;
        width:100%;
        height:100%;
        top:0px;
            z-index: 100000;
            background:rgba(0,0,0,.9);

    }

    #simple_sketch{
        top:20px;
        background: white;
        box-shadow: 0px 0px 10px rgba(0,0,0,.2);
        margin: auto;
        position: absolute;
        left: 50%;
        margin-left: -150px;
        width:300px!important;
        height:500px!important;
    }

    #doodleUploadWrap {
        width: 100%;
        position: fixed;
        bottom: 0px;
        left: 0px;
        border-radius: 0px;
        padding-right: 120px;
        box-sizing: border-box;
        color: white;
        margin: 0px;
        height: 60px;
        line-height: 60px;
        text-align:center;
        font-size: 30px;
        background:#472094;
    }
    #doodleUploadWrap input {
        position: absolute;
        top: 0;
        right: 120px;
        bottom:0;
        left:0;
        margin: 0;
        padding: 0;
        font-size: 20px;
        cursor: pointer;
        opacity: 0;
        display: block;
        width: 100%;
        filter: alpha(opacity=0);
    }

    #or{
        border: 2px solid #472094;
        color: #472094;
        font-size: 12px;
        padding: 2px;
        text-align: center;
        line-height: 20px;
        background: #805CDB;
        width: 20px;
        height: 20px;
        line-height: 22px;
        font-size: 14px;
        bottom: 15px;
        right: 90px;
        position: fixed;
        z-index: 10000;
        pointer-events:none;
    }

    #shareYourDoodle{
        border: 2px solid #472094;
        background: white;
        padding: 20px;
        color: #472094;
        font-size: 40px;
        text-align: center;
        width: 220px;
        margin: auto;
        margin-top: 80px;
        position: relative;
        z-index: 20;
    }

    #shareText{
        position:relative;
        z-index:20;
        color:white;
        text-align:center;
        padding: 20px 0px;
    }

    #shareText>span{
        color:#472094;
    }

    #shareBG{
        background:#FE4841;
        top:160px;
        left:0px;
        right:0px;
        bottom:0px;
        position:absolute;
    }

    #instructions{
        width: 40px;
        height: 40px;
        border-radius: 40px;
        color: white;
        font-size: 25px;
        line-height: 43px;
        text-align: center;
        cursor: pointer;
        background: white;
        border: 2px solid red;
        color: red;
        background: white;
        margin-bottom: -40px;
        left: 50%;
        margin-left: 40px;
        z-index: 1000;
        position: absolute;
    }

    #doodleInstructions{
        width:300px;
        border:2px solid #472094;
        padding:20px;
        box-sizing:border-box;
        left:50%;
        margin-left:-150px;
        top:120%;
        position:fixed;
        opacity:0;
        background:white;
        z-index:10000000000000;
        color:#472094;
        transition: all .6s;
    }

    #doodleInstructionsBG{
        background: rgba(255,255,255,.9);
        position: fixed;
        height: 100%;
        width: 100%;
        z-index: 10000000;
        opacity: 0;
        pointer-events: none;
        top: 0px;
        transition: all .6s;
    }

    #doodleInstructionsBG.active{
        opacity:1;
        pointer-events: auto;
    }

    #doodleInstructions.active{
        top:30%;
        opacity:1;
    }

    #closeDoodle{
        position: fixed;
        top: 10px;
        right: 10px;
        background: #FE4841;
        color: white;
        padding: 10px;
        border-radius: 100px;
        width: 18px;
        height: 18px;
        line-height: 20px;
        text-align: center;
        z-index: 100;
    }

    @media screen and (max-width: 500px) {
        #stop {
            width:100%;
            position:fixed;
            bottom:0px;
            left:0px;
            border-radius:0px;
        }

        #doodle {
            width:100%;
            position:fixed;
            bottom:0px;
            left:0px;
            border-radius:0px;
        }

        #replay{
            width:100%;
            position:fixed;
            bottom:0px;
            left:0px;
            border-radius:0px;
            margin-bottom: 0px;
        }

        #doodleUploadWrap{
            width:100%;
            position:fixed;
            bottom:0px;
            left:0px;
            border-radius:0px;
            padding-right:100px;
        }

        #doneDrawing{
            width:100%;
            position:fixed;
            bottom:0px;
            left:0px;
            border-radius:0px;
            margin:0px;
            box-sizing:border-box;
            line-height: 22px;
        }

        #clearDoodle{
            position: fixed;
            bottom: 70px;
            left: 10px;
            border-radius: 0px;
            margin: 0px;
            box-sizing: border-box;
            line-height: 22px;
            font-size: 20px;
            padding: 10px;
            width: 150px;
        }
    }

    
    </style>
</head>
<body>


    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '1658046067839869',
          xfbml      : true,
          version    : 'v2.8'
        });
        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>


    <div id = "landingPage">
        <nav id = "mainNav">
            <div id = "logo"></div>
            <div id = "menu">
                <a href = "app.html"><div id = "play">Play</div></a>
                <a href = "about.html"><div id = "about">About</div></a>
            </div>
        </nav>
    </div>
    <div id = "chooseScreen">

        <div id="candidate">
            
        </div>

        <div id = "draw">DOODLE</div>
        
        <div id="candidateName">
            Trump
        </div>
        
        <div id = "stance">STANCE ON</div>
        
            
        <div id="issue">
            
        </div>
        
        <div id = "stop">Stop</div>
        
        <a target="_BLANK" id = "search" href = "google.com"><p>Learn About It</p><div></div></a>
        
        <div id = "doodle">Doodle It!</div>
    </div>

    <div id = "drawScreen">

        <div id = "doodleThis">Now Doodling...</div>
        <div id="instructions">?</div>
        <div id = "doodleInstructions">
            Already know this candidates stance on the issue? Great, grab a pen & paper and start doodling! Not sure what their stance is? <a style = "color:#FE4841;" target="_BLANK" href = "http://www.google.com" id = "instructionsSearch">Figure it out</a> first!
        </div>
        <div id="doodleInstructionsBG"></div>
        <div id="candidate2">
            
        </div>
        
        <div id = "fullStance"></div>
        <a target="_BLANK" id = "search2" href = "google.com">Learn About This</a>
        <div id = "or">or</div>
        <div id = "OrDrawInBrowser">draw in browser</div>
        <div id="doodleUploadWrap">Upload Photo
            <input id="doodleUpload" type = "file"/>
        </div>
    </div>

    <div id = "drawinBrowser">
        <div id = "closeDoodle">✕</div>
        <!-- sketching in browser -->
        <canvas id="simple_sketch" width="300" height="500"></canvas>
        <script type="text/javascript">
        $(function() {
        $('#simple_sketch').sketch();
        });
        </script>
        <a download="doodle.jpg" id = "doneDrawing">Done</a><div id = "clearDoodle">Erase Canvas</div>

    </div>





    <div id = "shareScreen">
        <div id = "shareYourDoodle">
            <div><span style = "color:#FE4841;">Nice one!</span><br>Share Your Doodle!</div>
        </div>
        <div id = "shareText">use the tag<br>
<span>#makeamericadoodleagain</span><br>
CHALLENGE YOUR FRIENDS!</div>
        <div id = "shareit">Share it!</div>
        <div id = "replay">Doodle Again</div>
        <div id = "shareBG"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/3.4.1/firebase.js"></script>

    <script>
    // Initialize Firebase
    var config = {
    apiKey: "AIzaSyBU2gpSPOXQud13jn_XfG499tmnuARIJdI",
    authDomain: "makeamericadoodleagain.firebaseapp.com",
    databaseURL: "https://makeamericadoodleagain.firebaseio.com",
    storageBucket: 'gs://makeamericadoodleagain.appspot.com/',
    messagingSenderId: "26288147536"
    };
    firebase.initializeApp(config);
    </script>
    
    <script>
    var candidates = ['Hillary Clinton','Donald Trump','Jill Stein','Gary Johnson'];
    var candidatesShort = ['Hillary's','Donald's','Jill's','Gary's'];
    var issues = ['Fracking','Drug War','Private Prisons','Death Penalty','Student Debt','Standing Rock Protestors','Recreational Cannabis','Drinking Age','Voting requirements','Felon Voting Rights','Third-Party Candidates','LGBTQ Rights','Torture Techniques','NSA Surveillance','Military Budget','Military Intervention/ ISIS Intervention','Millenials','US-Russia Relations','Gender Identity','Trans Pacific Partnership','Free College','Black Lives Matter','Global Warming','China, China, China','Police Brutality','Planned Parenthood','Guns','Obamacare','Building the Wall','Minimum Wage','Big Pharma','Refugees','Social Security','Tax Increase','Corporate Tax','Smoking a Doobie','Size of the Government','NSA surveillance','Edward Snowden','Miss Universe','Breaking Up The Banks','Net Neutrality','Their Opponents Hair'];
    currIssueId = Math.floor(Math.random()*issues.length);
    currCandidateId = 0;
    $(document).ready(function(){
                
                function setupCanvas(){
                    setTimeout(function(){
                        var canvas = document.getElementById("simple_sketch");
                        var ctx = canvas.getContext("2d");
                        window.context = document.getElementById("simple_sketch").getContext("2d");
                        ctx.fillStyle = "white";
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                    },1000);
                }

                setupCanvas();
                
                $('#menu').click(function(){
                    $(this).toggleClass('active');
                });
                
                showChooseScreen();
                
                $("#stop").click(function(){
                    $("#stop").hide();
                    clearInterval(roulette);
                    $('#search').attr('href','http://www.google.com/search?q='+candidates[currCandidateId]+'+stance+on+'+issues[currIssueId]+'&btnG').fadeIn();
                    $('#search2').attr('href','http://www.google.com/search?q='+candidates[currCandidateId]+'+stance+on+'+issues[currIssueId]+'&btnG').show();
                    $('#instructionsSearch').attr('href','http://www.google.com/search?q='+candidates[currCandidateId]+'+stance+on+'+issues[currIssueId]+'&btnG').show();
                    
                    $('#doodle').show();
                });
                
                $('#doodle').click(function(){
                    showDoodleScreen(); 
                });
                
                var key = null;

                function doneDrawing(){
                   $('#drawinBrowser').hide();
                   if(window.doodleFileUpload){
                    console.log('good to go!!!!!!!');
                   }
                   var postListRef = firebase.database().ref('doodles');
                   var newPostRef = postListRef.push();
                    newPostRef.set({
                        url:"doodle"
                    });
                    var key = newPostRef.key;
                    window.key = key;

                    var canvas = document.getElementById("simple_sketch");
                    //var dt = canvas.toDataURL('image/png');
                    var dt = canvas.toBlob(function(blob){

                    

                    var storageRef = firebase.storage().ref().child("doodles/"+key+".png");
                    
                    var firstFile = blob;

                    if(window.doodleFileUpload){
                        firstFile = window.doodleFileUpload;
                    }

                    var uploadTask = storageRef.put(firstFile).then(function(snapshot){

                        var thisUrl = storageRef.getDownloadURL().then(function(url){
                            console.log(url);
                            window.url = url;
                            newPostRef.set({
                                url:key,
                                fullURL:url
                            });
                        });

                        

                        
                    });



                   },'image/png');

                    showShareScreen();


                   //this.href = dt;

                   
                   /*
                    var storageRef = firebase.storage.ref("folderName/file.jpg");
                    var fileUpload = document.getElementById("fileUpload");
                    fileUpload.on(‘change’, function(evt) {
                      //var firstFile = evt.target.file[0]; // get the first file uploaded
                      var firstFile = dt;
                      var uploadTask = storageRef.put(firstFile);
                    });*/
 
                };

                document.getElementById('doneDrawing').addEventListener('click',doneDrawing,false);

                $('#done').click(function(){
                    showShareScreen(); 

                });

                $("#clearDoodle").click(function(){
                    var canvas = document.getElementById("simple_sketch");
                    window.context.setTransform(1, 0, 0, 1, 0, 0);
                    window.context.clearRect(0, 0, canvas.width, canvas.height);
                    $('#simple_sketch').sketch().actions = [];
                    setupCanvas();
                    $('#simple_sketch').sketch();
                });

                $("#closeDoodle").click(function(){
                    $("#drawinBrowser").hide();
                });


                $("#instructions").click(function(){
                    $('#doodleInstructions').toggleClass('active');
                    $('#doodleInstructionsBG').toggleClass('active');
                });

                $('#doodleInstructionsBG').click(function(){
                    $('#doodleInstructions').toggleClass('active');
                    $('#doodleInstructionsBG').toggleClass('active');
                });
                
                $('#replay').click(function(){
                    var canvas = document.getElementById("simple_sketch");
                    window.context.setTransform(1, 0, 0, 1, 0, 0);
                    window.context.clearRect(0, 0, canvas.width, canvas.height);
                    $('#simple_sketch').sketch().actions = [];
                    setupCanvas();
                    $('#simple_sketch').sketch();
                   showChooseScreen(); 
                });

                $('#shareit').click(function(){
                showFbDialogue(); 
                });

                function showFbDialogue(){
                    console.log(window.url);
                    FB.ui({
                        method: 'feed',
                        mobile_iframe: true,
                        link: 'https://www.makeamericadoodleagain.com',
                        picture: window.url,
                        name:"This election is as awful as my doodle.",
                        caption: 'Building walls, banning abortion, and crazy emails. The best thing about this election is my doodle, and Ken Bone.',
                        description:"www.makeamericadoodleagain.com"
                      }, function(response){});
                }

                
                var roulette;
                
                function showChooseScreen(){
                    document.getElementById("doodleUpload").value = "";

                    

                    $('#drawinBrowser').hide();
                    $('#shareScreen').hide();
                    $('#chooseScreen').show();
                    $('#search').hide();
                    $('#doodle').hide();
                    $('#drawScreen').hide();
                    $('#shareScreen').hide();
                    $("#stop").show();
                    roulette = setInterval(function(){
                        currIssueId++;
                        if(currIssueId > issues.length-1){
                            currIssueId = 0;
                        }
                       $('#issue').html(issues[currIssueId]);
                       currCandidateId++;
                        if(currCandidateId > candidates.length-1){
                            currCandidateId = 0;
                        }
                       $('#candidate').attr('candidate',candidatesShort[currCandidateId]);
                       $('#candidate2').attr('candidate',candidatesShort[currCandidateId]);
                       $('#candidateName').html(candidatesShort[currCandidateId]);
                    },120);
                }

                var inputElement = document.getElementById('doodleUpload');
                inputElement.onchange = function(event) {
                   var fileList = inputElement.files;
                   window.doodleFileUpload = fileList[0];
                   doneDrawing();
                   //TODO do something with fileList.  
                }

                    
                function showShareScreen(){
                    $('#drawScreen').hide();
                    $('#shareScreen').show();
                    clearInterval(timer);
                }

                function showDoodleScreen(){
                    $('#fullStance').html('<span>'+candidates[currCandidateId]+"\'s</span> stance on <span>"+issues[currIssueId]+"</span");
                    $('#chooseScreen').hide();
                    $('#drawScreen').show();
                    startDoodleTimer();
                }

                $("#OrDrawInBrowser").click(function(){
                    showDoodleInBrowser();
                });

                function showDoodleInBrowser(){
                    $('#drawinBrowser').show();
                }
                
                var timer;
                function startDoodleTimer(){
                    var time = 240;
                    var minutes = time/60;
                    timer = setInterval(function(){
                        if(time<0){
                            clearInterval(timer);
                            return;
                        }
                        time--;
                        minutes = Math.floor(time/60);
                        $('#timer').html(minutes+":"+time%60);
                    },1000);
                }
    });
            
    </script>
        
</body>
</html>




